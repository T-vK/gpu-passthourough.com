<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="GPU passthrough, list, notebook, laptop, GPU, dGPU, iGPU, eGPU">
    <meta name="author" content="T-vK">

    <title>GPU Passthrough</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/css/bootstrap.min.css" integrity="sha384-PDle/QlgIONtM1aqA2Qemk5gPOE7wFq8+Em+G/hmo5Iq0CCmYZLv3fVRDJ4MMwEA" crossorigin="anonymous">
    <link href="./dashboard.css" rel="stylesheet">
    <!--<link href="https://drvic10k.github.io/bootstrap-sortable/Contents/bootstrap-sortable.css" rel="stylesheet">-->

  </head>

  <body>
    <div id="particles"></div>
    <header>
        <nav class="navbar navbar-expand-md navbar-dark bg-dark">
          <a class="navbar-brand" href="#">Mobile GPU Passthrough</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="nav nav-pills nav-fill mr-auto">
              <li class="nav-item">
                <a class="nav-link active" href="#">Notebooks <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://github.com/T-vK/gpu-passthrough.com/issues/new?template=submit_new_device.md">Submit New Device</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://github.com/T-vK/gpu-passthrough.com/issues/new">Contact</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://github.com/T-vK/MobilePassThrough/#screenshot-of-the-compatibility-check-script">How to check your device</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://github.com/T-vK/MobilePassThrough">How to set up GPU passthrough on your device</a>
              </li>
            </ul>
            <form class="form-inline mt-2 mt-md-0">
                <div class="input-group ">
                    <input type="text" disabled="" aria-label="Recipient's username" aria-describedby="button-addon2" placeholder="Sorry, not implemented yet" class="form-control">
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" disabled="" type="button" id="button-addon2">Search</button>
                    </div>
                </div>
            </form>
          </div>
        </nav>
    </header>

  <div class="container-fluid">
    <div class="row">
      <main role="main" class="col-md-12 col-lg-12 px-4">

        <h2>Notebook Compatibility List</h2>
        <div class="table-responsive">
          <table id="notebook-compatibility-list" class="sortable table table-striped table-sm">
            <thead>
              <tr>
                <th>Device</th>
                <th>CPU and GPUs</th>
                <th>dGPU passthrough</th>
                <th>iGPU passthrough</th>
                <th>eGPU passthrough</th>
                <!--<th>Checklist</th>-->
                <th>Source</th>
                <th>Notes</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        </div>

      </main>
    </div>
  </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/js/bootstrap.min.js" integrity="sha384-7aThvCh9TypR7fIc2HV4O/nFMVCBwyIUKL8XCtKE+8xgCgl/PQGuFsvShjr74PBp" crossorigin="anonymous"></script>

    <script src="https://pixijs.download/dev-graphics-batch-pool/pixi.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/T-vK/SuperParticles@master/SuperParticles.js"></script>

    <!--<script src="https://drvic10k.github.io/bootstrap-sortable/Scripts/bootstrap-sortable.js"></script>-->
    <script>

        window.onload = function(){
            var superParticles = new SuperParticles({
                "maxFps": 30,
                "autoStartAnimation": true,
                "container": {
                    "backgroundCssRule": ""
                },
                "pixiApp": {
                    "backgroundColor": "0xFFFFFF",
                    "antialias": true,
                    "transparent": false,
                    "forceFXAA": false,
                    "powerPreference": "high-performance",
                    "resolution": 1
                },
                "particles": {
                    "amount": 80,
                    "radius": 2,
                    "velocity": 10,
                    "color": "0xCCCCCC",
                    "fadeInDuration": 3000,
                    "fadeOutDuration": 600,
                    "keepRelativePositionOnResize": true
                },
                "lines": {
                    "minDistance": 0.09,
                    "color": "0xCCCCCC",
                    "maxOpacity": 0.6,
                    "thickness": 1,
                    "distanceBasedTransparency": true
                },
                "debug": {
                    "showFps": false
                }
            })
        }
    </script>

    <script>
        function getGpuGuestInfo(gpus,type) {
            return gpus.map(gpu => {
                if (gpu.type !== type)
                    return ''
                let gpuGuestInfo = ''
                for (const [guest,guestInfo] of Object.entries(gpu['passthrough-guests'])) {
                     gpuGuestInfo += `${guest}: ${guestInfo}<br/>`
                }
                return `<b>${gpu.name}</b>: <br/>${gpuGuestInfo}`
            }).filter(item=>item!='').join('<br/>')
        }
        function checklistToHtml(checklist) {
            let stringChecklist = ''
            for (const [key,value] of Object.entries(checklist)) {
                 stringChecklist += `${key}: ${value}<br/>`
            }
            return stringChecklist
        }
        $.getJSON("notebook-compatibility-list.json", function(devices) {
            devices.forEach((device, i) => {
                const name = device.name
                const cpu = device.cpu
                const gpus = device.gpus.filter(gpu=>gpu.type!=='eGPU').map(gpu => `${gpu.type}: ${gpu.name}`).join('<br/>')
                const dGpus = getGpuGuestInfo(device.gpus, 'dGPU')
                const iGpus = getGpuGuestInfo(device.gpus, 'iGPU')
                const eGpus = getGpuGuestInfo(device.gpus, 'eGPU')
                const checklist = checklistToHtml(device.checklist)
                const testedBy = device['tested-by'].map(tester=>`<a href="${tester.url}">${tester.name}</a`).join('<br/>')
                const notes = device.notes

                $('#notebook-compatibility-list>tbody').append(`
                    <tr>
                        <td>${name}</td>
                        <td>CPU: ${cpu}<br/>${gpus}</td>
                        <td>${dGpus}</td>
                        <td>${iGpus}</td>
                        <td>${eGpus}</td>
                        <!--<td>${checklist}</td>-->
                        <td>${testedBy}</td>
                        <td>${notes}</td>
                    </tr>
                `);
            });
            //$('#notebook-compatibility-list').on('sorted', function () {console.log("Table was sorted."); });
        });
    </script>
  </body>
</html>
